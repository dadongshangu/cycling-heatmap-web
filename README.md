# ğŸš´ è¿åŠ¨è½¨è¿¹çƒ­åŠ›å›¾ç”Ÿæˆå™¨ (Web Version)

ä¸€ä¸ªåŸºäºWebçš„GPSè½¨è¿¹çƒ­åŠ›å›¾ç”Ÿæˆå™¨ï¼Œä¸“æ³¨äºéª‘è¡Œï¼ŒåŒæ—¶æ”¯æŒå¾’æ­¥ã€è·‘æ­¥ç­‰æ‰€æœ‰GPSè½¨è¿¹ã€‚å°†GPXè½¨è¿¹æ–‡ä»¶è½¬æ¢ä¸ºStravaé£æ ¼çš„äº¤äº’å¼çƒ­åŠ›å›¾ã€‚

## âœ¨ ç‰¹æ€§

- ğŸŒ **çº¯Webåº”ç”¨** - æ— éœ€å®‰è£…ï¼Œæ‰“å¼€æµè§ˆå™¨å³å¯ä½¿ç”¨
- ğŸ”’ **éšç§ä¿æŠ¤** - æ‰€æœ‰æ–‡ä»¶åœ¨æµè§ˆå™¨æœ¬åœ°å¤„ç†ï¼Œä¸ä¸Šä¼ åˆ°æœåŠ¡å™¨
- ğŸ¨ **Stravaé£æ ¼** - ç»¿â†’é»„â†’çº¢æ¸å˜ï¼Œå®Œç¾å¤åˆ»Stravaçƒ­åŠ›å›¾æ ·å¼
- ğŸ“± **å“åº”å¼è®¾è®¡** - æ”¯æŒæ‰‹æœºã€å¹³æ¿ã€ç”µè„‘ç­‰å„ç§è®¾å¤‡
- âš¡ **å®æ—¶é¢„è§ˆ** - æ‹–åŠ¨å‚æ•°æ»‘å—å®æ—¶æ›´æ–°çƒ­åŠ›å›¾ï¼ˆå¸¦é˜²æŠ–ä¼˜åŒ–ï¼‰
- ğŸ—ºï¸ **å¤šåœ°å›¾æ ·å¼** - æ”¯æŒæš—è‰²/æµ…è‰²åœ°å›¾ï¼Œä¸­è‹±æ–‡åœ°å›¾åˆ‡æ¢
- ğŸ“Š **ç»Ÿè®¡ä¿¡æ¯** - æ˜¾ç¤ºè½¨è¿¹ç»Ÿè®¡æ•°æ®å’Œæ—¥æœŸèŒƒå›´
- ğŸ¯ **æ—¥æœŸè¿‡æ»¤** - å¯é€‰æ‹©æ˜¾ç¤ºç‰¹å®šæ—¶é—´èŒƒå›´çš„è½¨è¿¹
- ğŸ“– **GPXè·å–æŒ‡å—** - è¯¦ç»†çš„è®¾å¤‡å’Œåº”ç”¨å¯¼å‡ºæ•™ç¨‹
- âŒ¨ï¸ **é”®ç›˜å¿«æ·é”®** - æ”¯æŒå¿«æ·é”®æ“ä½œï¼Œæå‡ä½¿ç”¨æ•ˆç‡
- ğŸ’¾ **è®¾ç½®ä¿å­˜** - è‡ªåŠ¨ä¿å­˜ç”¨æˆ·è®¾ç½®ï¼Œä¸‹æ¬¡æ‰“å¼€è‡ªåŠ¨æ¢å¤
- ğŸ›ï¸ **å‚æ•°æŠ˜å ** - é«˜çº§å‚æ•°é»˜è®¤æŠ˜å ï¼Œç•Œé¢æ›´ç®€æ´
- ğŸ“ˆ **è¿›åº¦æ˜¾ç¤º** - æ–‡ä»¶å¤„ç†æ—¶æ˜¾ç¤ºè¯¦ç»†è¿›åº¦å’Œå‰©ä½™æ—¶é—´
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†** - å®Œå–„çš„é”™è¯¯æ•è·å’Œç”¨æˆ·æç¤º
- ğŸ“¤ **ç§»åŠ¨ç«¯å¯¼å‡ºä¼˜åŒ–** - ä¼˜å…ˆä½¿ç”¨Web Share APIï¼Œæ”¯æŒé«˜è´¨é‡å›¾ç‰‡åˆ†äº«
- ğŸ” **ç¼©æ”¾è‡ªé€‚åº”** - æ ¹æ®åœ°å›¾ç¼©æ”¾çº§åˆ«è‡ªåŠ¨è°ƒæ•´çº¿æ¡ç²—ç»†ï¼Œä½ç¼©æ”¾æ—¶è‡ªåŠ¨å˜ç»†é¿å…è¿‡åº¦ç³Šåœ¨ä¸€èµ·
- ğŸ’ **æèµ æ”¯æŒ** - æ”¯æŒé¡¹ç›®æŒç»­å‘å±•
- ğŸ†“ **é›¶é—¨æ§›ä½¿ç”¨** - é»˜è®¤ä½¿ç”¨å…è´¹è‹±æ–‡åœ°å›¾ï¼Œæ— éœ€ä»»ä½•é…ç½®å³å¯ä½¿ç”¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åœ¨çº¿ä½¿ç”¨ï¼ˆåŸºç¡€åŠŸèƒ½ï¼‰
1. ç›´æ¥æ‰“å¼€ `index.html` æ–‡ä»¶
2. æ‹–æ‹½æˆ–é€‰æ‹©è½¨è¿¹è®°å½•GPXä¸Šä¼ 
3. è°ƒæ•´å‚æ•°è®¾ç½®ï¼ˆå¯é€‰ï¼‰
4. ç‚¹å‡»"ç”Ÿæˆçƒ­åŠ›å›¾"æŒ‰é’®
5. åœ¨åœ°å›¾ä¸ŠæŸ¥çœ‹ç»“æœ

**æ³¨æ„ï¼š** è§†é¢‘ç”ŸæˆåŠŸèƒ½éœ€è¦åœ¨HTTPæœåŠ¡å™¨ç¯å¢ƒä¸‹è¿è¡Œï¼Œè¯·å‚è€ƒä¸‹é¢çš„"æœ¬åœ°éƒ¨ç½²"éƒ¨åˆ†ã€‚

### æœ¬åœ°éƒ¨ç½²

**é‡è¦æç¤ºï¼š** è§†é¢‘ç”ŸæˆåŠŸèƒ½éœ€è¦åœ¨HTTPæœåŠ¡å™¨ç¯å¢ƒä¸‹è¿è¡Œï¼Œä¸èƒ½ç›´æ¥åœ¨æœ¬åœ°æ–‡ä»¶ï¼ˆfile://ï¼‰æ‰“å¼€ã€‚

#### å¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èï¼‰

**Windows:**
```bash
# åŒå‡»è¿è¡Œæˆ–åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ
start-server.bat
```

**Linux/Mac:**
```bash
# æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
chmod +x start-server.sh

# è¿è¡Œè„šæœ¬
./start-server.sh
```

#### æ‰‹åŠ¨å¯åŠ¨æ–¹æ³•

**æ–¹æ³•1: ä½¿ç”¨Pythonï¼ˆæ¨èï¼‰**
```bash
# Python 3
python -m http.server 8000

# Python 2
python -m SimpleHTTPServer 8000
```

**æ–¹æ³•2: ä½¿ç”¨Node.js**
```bash
# ä½¿ç”¨http-server
npx http-server . -p 8000

# æˆ–ä½¿ç”¨serve
npx serve . -p 8000
```

**æ–¹æ³•3: ä½¿ç”¨VS Code Live Serveræ‰©å±•**
1. å®‰è£…"Live Server"æ‰©å±•
2. å³é”®ç‚¹å‡» `index.html`
3. é€‰æ‹© "Open with Live Server"
4. è‡ªåŠ¨æ‰“å¼€ `http://localhost:5500`

**æ–¹æ³•4: ä½¿ç”¨PHPï¼ˆå¦‚æœå·²å®‰è£…ï¼‰**
```bash
php -S localhost:8000
```

#### è®¿é—®åº”ç”¨

å¯åŠ¨æœåŠ¡å™¨åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
- Python/Node.js: `http://localhost:8000`
- VS Code Live Server: `http://localhost:5500`

**æ³¨æ„ï¼š** ç¡®ä¿ä½¿ç”¨ `http://` è€Œä¸æ˜¯ `file://`ï¼Œå¦åˆ™è§†é¢‘ç”ŸæˆåŠŸèƒ½æ— æ³•ä½¿ç”¨ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
cycling-heatmap-web/
â”œâ”€â”€ index.html              # ä¸»é¡µé¢
â”œâ”€â”€ donate.JPEG             # å¾®ä¿¡èµèµç 
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css          # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ main.js            # ä¸»åº”ç”¨é€»è¾‘
â”‚   â”œâ”€â”€ gpx-parser.js      # GPXæ–‡ä»¶è§£æå™¨
â”‚   â”œâ”€â”€ fit-parser.js      # FITæ–‡ä»¶è§£æå™¨
â”‚   â”œâ”€â”€ heatmap-renderer.js # çƒ­åŠ›å›¾æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ map-config.js      # åœ°å›¾é…ç½®
â”‚   â””â”€â”€ utils.js           # å·¥å…·å‡½æ•°
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ check-syntax.js    # è¯­æ³•æ£€æŸ¥è„šæœ¬
â”‚   â”œâ”€â”€ check-files.js     # æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥
â”‚   â”œâ”€â”€ check-quality.js   # ä»£ç è´¨é‡æ£€æŸ¥
â”‚   â”œâ”€â”€ test-all.js        # ç»¼åˆæµ‹è¯•è„šæœ¬ï¼ˆæ—§ç‰ˆï¼Œå‘åå…¼å®¹ï¼‰
â”‚   â”œâ”€â”€ test/              # æµ‹è¯•ç³»ç»Ÿç›®å½•
â”‚   â”‚   â”œâ”€â”€ unit/          # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ regression/    # å›å½’æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ fixtures/      # æµ‹è¯•æ•°æ®
â”‚   â”‚   â””â”€â”€ test-all.js    # è¿è¡Œæ‰€æœ‰æµ‹è¯•
â”‚   â”œâ”€â”€ pre-commit-hook.js        # Pre-commit hookï¼ˆNode.jsï¼Œè·¨å¹³å°ï¼‰
â”‚   â”œâ”€â”€ pre-push-hook.js          # Pre-push hookï¼ˆNode.jsï¼Œè·¨å¹³å°ï¼‰
â”‚   â”œâ”€â”€ setup-git-hooks.bat       # Git hooksè®¾ç½®è„šæœ¬ï¼ˆWindowsï¼‰
â”‚   â””â”€â”€ setup-git-hooks.sh        # Git hooksè®¾ç½®è„šæœ¬ï¼ˆLinux/Macï¼‰
â”‚   â””â”€â”€ README.md          # è„šæœ¬ä½¿ç”¨è¯´æ˜
â”œâ”€â”€ doc/
â”‚   â”œâ”€â”€ TESTING_GUIDE.md   # æµ‹è¯•æŒ‡å—
â”‚   â”œâ”€â”€ DEVELOPER_GUIDE.md # å¼€å‘æŒ‡å—
â”‚   â””â”€â”€ BUG_ANALYSIS_AND_PREVENTION.md # é”™è¯¯åˆ†æ
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ demo/              # ç¤ºä¾‹è½¨è¿¹è®°å½•GPX
â”‚       â”œâ”€â”€ README.md      # ç¤ºä¾‹æ–‡ä»¶è¯´æ˜
â”‚       â”œâ”€â”€ sample_beijing_ride.gpx
â”‚       â””â”€â”€ sample_shanghai_ride.gpx
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

### ä¾èµ–åº“ (é€šè¿‡CDNåŠ è½½)
- Leaflet.js - åœ°å›¾åº“
- Leaflet.heat - çƒ­åŠ›å›¾æ’ä»¶
- html2canvas - åœ°å›¾å¯¼å‡ºåŠŸèƒ½

## ğŸ¨ ç•Œé¢é¢„è§ˆ

### ä¸»ç•Œé¢
- **å·¦ä¾§é¢æ¿**: æ–‡ä»¶ä¸Šä¼ ã€å‚æ•°æ§åˆ¶ã€ç»Ÿè®¡ä¿¡æ¯
- **å³ä¾§é¢æ¿**: äº¤äº’å¼åœ°å›¾æ˜¾ç¤ºåŒºåŸŸ
- **å“åº”å¼å¸ƒå±€**: è‡ªåŠ¨é€‚é…ä¸åŒå±å¹•å°ºå¯¸

### åŠŸèƒ½åŒºåŸŸ
1. **æ–‡ä»¶ä¸Šä¼ åŒº** - æ”¯æŒæ‹–æ‹½å’Œç‚¹å‡»ä¸Šä¼ 
2. **å‚æ•°æ§åˆ¶é¢æ¿** - å®æ—¶è°ƒèŠ‚çƒ­åŠ›å›¾å‚æ•°
3. **ç»Ÿè®¡ä¿¡æ¯é¢æ¿** - æ˜¾ç¤ºè½¨è¿¹æ•°æ®ç»Ÿè®¡
4. **äº¤äº’å¼åœ°å›¾** - æ˜¾ç¤ºçƒ­åŠ›å›¾ç»“æœ

## âš™ï¸ å‚æ•°è¯´æ˜

### åœ°å›¾æ ·å¼
- **æš—è‰²åœ°å›¾** (æ¨è) - CartoDB Darkï¼Œé«˜å¯¹æ¯”åº¦
- **æµ…è‰²åœ°å›¾** - CartoDB Positronï¼Œæ·¡é›…æ¸…çˆ½

### åœ°å›¾è¯­è¨€
- **English Map** - CartoDBè‹±æ–‡åœ°å›¾ï¼Œå›½é™…é€šç”¨ï¼Œ**å®Œå…¨å…è´¹ï¼Œæ— éœ€é…ç½®**ï¼ˆæ¨èï¼‰
- **ä¸­æ–‡åœ°å›¾(çŸ¢é‡)** - å¤©åœ°å›¾çŸ¢é‡åº•å›¾ï¼Œä¸­æ–‡æ ‡æ³¨ï¼ˆéœ€è¦APIå¯†é’¥ï¼Œå¯é€‰åŠŸèƒ½ï¼‰
- **ä¸­æ–‡å«æ˜Ÿå›¾** - å¤©åœ°å›¾å½±åƒåº•å›¾ï¼Œä¸­æ–‡æ ‡æ³¨ï¼ˆéœ€è¦APIå¯†é’¥ï¼Œå¯é€‰åŠŸèƒ½ï¼‰

> ğŸ’¡ **æç¤º**ï¼šé»˜è®¤ä½¿ç”¨å…è´¹è‹±æ–‡åœ°å›¾ï¼Œæ— éœ€ä»»ä½•é…ç½®å³å¯ä½¿ç”¨æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ã€‚ä¸­æ–‡åœ°å›¾æ˜¯å¯é€‰çš„é«˜çº§åŠŸèƒ½ï¼Œéœ€è¦é…ç½®å¤©åœ°å›¾APIå¯†é’¥ã€‚

### çƒ­åŠ›å›¾å‚æ•°
- **åœ°å›¾æ ·å¼** - æš—è‰²/æµ…è‰²åœ°å›¾åˆ‡æ¢
- **åœ°å›¾è¯­è¨€** - è‹±æ–‡åœ°å›¾ï¼ˆå…è´¹ï¼‰/ ä¸­æ–‡åœ°å›¾ï¼ˆéœ€APIå¯†é’¥ï¼‰
- **çº¿æ¡ç²—ç»†** (1-10) - æ§åˆ¶çƒ­åŠ›å›¾çº¿æ¡çš„ç²—ç»†ç¨‹åº¦ï¼ˆé«˜çº§å‚æ•°ï¼Œé»˜è®¤æŠ˜å ï¼‰
- **æ¨¡ç³Šç¨‹åº¦** (1-20) - æ§åˆ¶çƒ­åŠ›å›¾çš„æ¨¡ç³Šæ•ˆæœï¼ˆé«˜çº§å‚æ•°ï¼Œé»˜è®¤æŠ˜å ï¼‰
- **é€æ˜åº¦** (0.1-1.0) - æ§åˆ¶çƒ­åŠ›å›¾çš„é€æ˜åº¦ï¼ˆé«˜çº§å‚æ•°ï¼Œé»˜è®¤æŠ˜å ï¼‰
- **æ—¶é—´èŒƒå›´** - è¿‡æ»¤æ˜¾ç¤ºç‰¹å®šæ—¶é—´æ®µçš„è½¨è¿¹

> ğŸ’¡ **æç¤º**ï¼šé«˜çº§å‚æ•°ï¼ˆçº¿æ¡ç²—ç»†ã€æ¨¡ç³Šç¨‹åº¦ã€é€æ˜åº¦ï¼‰é»˜è®¤æŠ˜å ï¼Œéœ€è¦ç²¾ç»†è°ƒèŠ‚æ—¶å¯ç‚¹å‡»"ğŸ¨ é«˜çº§å‚æ•°è®¾ç½®"å±•å¼€ã€‚

### æ¨èè®¾ç½®
```
çº¿æ¡ç²—ç»†: 1-2 (æœ€ç»†ï¼Œæœ€åƒStrava)
æ¨¡ç³Šç¨‹åº¦: 1-3 (æœ€æ¸…æ™°)
é€æ˜åº¦: 0.8 (é«˜å¯¹æ¯”åº¦)
åœ°å›¾æ ·å¼: æš—è‰²åœ°å›¾
```

### çƒ­åŠ›å›¾æ¸²æŸ“ä¼˜åŒ–

- **æ™ºèƒ½æ’å€¼** - è‡ªåŠ¨åœ¨è½¨è¿¹ç‚¹ä¹‹é—´æ’å€¼ï¼Œç¡®ä¿çƒ­åŠ›å›¾æ˜¾ç¤ºä¸ºè¿ç»­çº¿æ¡è€Œéç¦»æ•£ç‚¹
- **è½¨è¿¹è¾¹ç•Œä¿æŠ¤** - åªåœ¨çœŸå®è½¨è¿¹æ®µå†…éƒ¨æ’å€¼ï¼Œä¸åœ¨ä¸åŒè½¨è¿¹ä¹‹é—´ç”Ÿæˆè™šå‡è¿æ¥
- **Douglas-Peuckerç®—æ³•** - æ™ºèƒ½ç®€åŒ–å¤§æ•°æ®é›†ï¼Œä¿æŒè½¨è¿¹å½¢çŠ¶çš„åŒæ—¶å‡å°‘ç‚¹æ•°
- **ç¼©æ”¾è‡ªé€‚åº”** - æ ¹æ®åœ°å›¾ç¼©æ”¾çº§åˆ«è‡ªåŠ¨è°ƒæ•´çº¿æ¡ç²—ç»†ï¼Œä½ç¼©æ”¾æ—¶è‡ªåŠ¨å˜ç»†é¿å…è¿‡åº¦ç³Šåœ¨ä¸€èµ·

### FITæ–‡ä»¶è§£æç‰¹æ€§

- **æ™ºèƒ½åæ ‡æ ¼å¼æ£€æµ‹** - è‡ªåŠ¨è¯†åˆ«semicircleså’Œdegreesæ ¼å¼ï¼Œç¡®ä¿æ­£ç¡®è½¬æ¢
- **å…¨å±€ç¦»ç¾¤ç‚¹è¿‡æ»¤** - ä½¿ç”¨ç»Ÿè®¡æ–¹æ³•è¿‡æ»¤åœ°ç†ä½ç½®ä¸Šå¼‚å¸¸çš„GPSç‚¹ï¼ˆå¦‚éæ´²çš„ç‚¹ï¼‰
- **ç›¸é‚»ç‚¹è·ç¦»æ£€æµ‹** - æ£€æµ‹å¹¶è¿‡æ»¤è·¨æ´²å¼‚å¸¸ç‚¹ï¼Œä¿æŒè½¨è¿¹è¿ç»­æ€§
- **å¤šæ¶ˆæ¯ç±»å‹æ”¯æŒ** - æ”¯æŒæ‰€æœ‰FITæ¶ˆæ¯ç±»å‹ï¼Œä¸é™åˆ¶æ¶ˆæ¯ç±»å‹20ï¼ˆRecordï¼‰
- **é™çº§æ–¹æ¡ˆ** - å¦‚æœå¤–éƒ¨åº“ä¸å¯ç”¨ï¼Œè‡ªåŠ¨ä½¿ç”¨å†…ç½®æ‰‹åŠ¨è§£æå™¨

### é”®ç›˜å¿«æ·é”®
- `Ctrl/Cmd + O` - æ‰“å¼€æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†
- `Ctrl/Cmd + G` - ç”Ÿæˆçƒ­åŠ›å›¾ï¼ˆæŒ‰é’®å¯ç”¨æ—¶ï¼‰
- `Esc` - å…³é—­æ‰€æœ‰æ‰“å¼€çš„æ¨¡æ€æ¡†

### è®¾ç½®è‡ªåŠ¨ä¿å­˜
åº”ç”¨ä¼šè‡ªåŠ¨ä¿å­˜æ‚¨çš„è®¾ç½®ï¼ˆåœ°å›¾æ ·å¼ã€è¯­è¨€ã€å‚æ•°ç­‰ï¼‰ï¼Œä¸‹æ¬¡æ‰“å¼€æ—¶ä¼šè‡ªåŠ¨æ¢å¤ï¼Œæ— éœ€é‡å¤é…ç½®ã€‚

## ğŸ“Š æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

- **è½¨è¿¹è®°å½•GPX** (.gpx) - GPS Exchange Format
- **è½¨è¿¹è®°å½•FIT** (.fit) - Garmin ç­‰ç è¡¨å¸¸ç”¨çš„äºŒè¿›åˆ¶è½¨è¿¹æ ¼å¼
- **æ‰¹é‡ä¸Šä¼ ** - æ”¯æŒåŒæ—¶ä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼ˆå¯æ··åˆ GPX å’Œ FIT æ ¼å¼ï¼‰
- **è‡ªåŠ¨è§£æ** - æå–è½¨è¿¹ç‚¹ã€æ—¶é—´æˆ³ã€æµ·æ‹”ç­‰ä¿¡æ¯
- **æ–‡ä»¶å¤§å°é™åˆ¶** - å•ä¸ªæ–‡ä»¶æœ€å¤§50MBï¼Œæ€»å¤§å°æœ€å¤§200MB
- **æ–‡ä»¶éªŒè¯** - è‡ªåŠ¨éªŒè¯æ–‡ä»¶æ ¼å¼å’Œå¤§å°ï¼Œè¶…å¤§æ–‡ä»¶ä¼šæç¤ºè·³è¿‡

> **æç¤º**ï¼šå¦‚æœæ‚¨æœ‰ `.fit.gz` å‹ç¼©æ–‡ä»¶ï¼Œè¯·å…ˆè§£å‹ä¸º `.fit` æ ¼å¼åå†ä¸Šä¼ ã€‚å¯ä»¥ä½¿ç”¨ 7-Zipã€WinRAR ç­‰è§£å‹å·¥å…·ï¼Œæˆ–åœ¨çº¿è§£å‹æœåŠ¡ã€‚

## ğŸ“– è½¨è¿¹è®°å½•GPXè·å–æŒ‡å—

åº”ç”¨å†…ç½®äº†è¯¦ç»†çš„è½¨è¿¹è®°å½•GPXè·å–æŒ‡å—ï¼Œæ¶µç›–å„ç§è®¾å¤‡å’Œåº”ç”¨ï¼š

### ğŸš´ ç è¡¨è®¾å¤‡
- **è¿ˆé‡‘ç è¡¨ (MEILAN)** - é€šè¿‡é¡½é¹¿ç«æŠ€Appå¯¼å‡º
- **iGPSPORTç è¡¨** - é€šè¿‡å®˜æ–¹Appå¯¼å‡º
- **Garminç è¡¨** - é€šè¿‡Garmin Connectå¯¼å‡º
- **Wahooç è¡¨** - é€šè¿‡ELEMNT Appå¯¼å‡º
- **å…¶ä»–å“ç‰Œ** - çŒ«çœ¼ã€é€Ÿè…¾ã€ç™¾é”è…¾ç­‰

### âŒš æ™ºèƒ½æ‰‹è¡¨
- **Apple Watch** - é€šè¿‡ç¬¬ä¸‰æ–¹Appå¯¼å‡º
- **Garminæ‰‹è¡¨** - é€šè¿‡Garmin Connectå¯¼å‡º
- **åä¸º/å°ç±³æ‰‹è¡¨** - é€šè¿‡è¿åŠ¨å¥åº·Appå¯¼å‡º

### ğŸ“± æ‰‹æœºåº”ç”¨
- **å›½é™…åº”ç”¨** - Stravaã€Komootã€MapMyRideç­‰
- **å›½å†…éª‘è¡Œåº”ç”¨** - é¡½é¹¿ç«æŠ€ã€éª‘è®°ã€è¡Œè€…ã€å’•å’šç­‰
- **å›½å†…å¾’æ­¥åº”ç”¨** - ä¸¤æ­¥è·¯ï¼ˆæˆ·å¤–åŠ©æ‰‹ï¼‰ã€å…­åªè„šç­‰
- **è¿åŠ¨å¥èº«åº”ç”¨** - æ‚¦è·‘åœˆã€Keepç­‰

### ğŸ” æ™ºèƒ½æœç´¢
ç‚¹å‡»"ğŸ“– å¦‚ä½•è·å–è½¨è¿¹è®°å½•GPXï¼Ÿ"æŒ‰é’®ï¼Œä½¿ç”¨æœç´¢åŠŸèƒ½å¿«é€Ÿæ‰¾åˆ°ä½ çš„è®¾å¤‡ï¼š
- æœç´¢"è¿ˆé‡‘"æ‰¾åˆ°è¿ˆé‡‘ç è¡¨çš„å¯¼å‡ºæ–¹æ³•
- æœç´¢"Strava"æ‰¾åˆ°Stravaçš„å¯¼å‡ºæ­¥éª¤
- æœç´¢"Apple Watch"æ‰¾åˆ°æ‰‹è¡¨çš„å¯¼å‡ºæ–¹å¼

## ğŸ¯ æŠ€æœ¯ç‰¹ç‚¹

### æ ¸å¿ƒæŠ€æœ¯
- **çº¯å‰ç«¯å®ç°** - HTML5 + CSS3 + ES6 JavaScript
- **Leaflet.js** - è½»é‡çº§åœ°å›¾åº“
- **Leaflet.heat** - çƒ­åŠ›å›¾æ’ä»¶
- **DOMParser** - XMLè§£æï¼ˆGPXæ–‡ä»¶ï¼‰
- **äºŒè¿›åˆ¶è§£æ** - æ‰‹åŠ¨FITæ–‡ä»¶è§£æï¼ˆæ”¯æŒæ‰€æœ‰æ¶ˆæ¯ç±»å‹ï¼‰
- **File API** - æ–‡ä»¶å¤„ç†
- **ArrayBuffer** - äºŒè¿›åˆ¶æ•°æ®å¤„ç†
- **GeoUtils** - åœ°ç†è®¡ç®—å·¥å…·ç±»ï¼ˆHaversineè·ç¦»è®¡ç®—ã€è§’åº¦è½¬æ¢ç­‰ï¼‰

### æ€§èƒ½ä¼˜åŒ–
- **åˆ†å—å¤„ç†** - å¤§æ–‡ä»¶åˆ†æ‰¹è§£æ
- **é˜²æŠ–ä¼˜åŒ–** - å‚æ•°è°ƒèŠ‚ä½¿ç”¨é˜²æŠ–ï¼Œé¿å…é¢‘ç¹æ›´æ–°
- **åŠ¨æ€å‚æ•°** - æ ¹æ®ç¼©æ”¾çº§åˆ«è‡ªåŠ¨è°ƒæ•´
- **å†…å­˜ç®¡ç†** - åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„æ•°æ®ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼
- **æ–‡ä»¶å¤§å°éªŒè¯** - é˜²æ­¢è¶…å¤§æ–‡ä»¶å¯¼è‡´å†…å­˜æº¢å‡º
- **è¿›åº¦æ˜¾ç¤º** - å®æ—¶æ˜¾ç¤ºå¤„ç†è¿›åº¦å’Œå‰©ä½™æ—¶é—´ä¼°ç®—
- **ä»£ç ä¼˜åŒ–** - æå–å…¬å…±å·¥å…·å‡½æ•°ï¼ˆGeoUtilsï¼‰ï¼Œå‡å°‘ä»£ç é‡å¤
- **å‡½æ•°æ‹†åˆ†** - å¤§å‡½æ•°æ‹†åˆ†ä¸ºå°å‡½æ•°ï¼Œæå‡å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½
- **é­”æ³•æ•°å­—æå–** - å°†ç¡¬ç¼–ç æ•°å­—æå–ä¸ºå¸¸é‡ï¼Œæå‡ä»£ç å¯è¯»æ€§
- **éå†ä¼˜åŒ–** - åˆå¹¶å¤šæ¬¡éå†ï¼Œå‡å°‘å¾ªç¯æ¬¡æ•°ï¼Œæå‡å¤„ç†é€Ÿåº¦
- **å¯¼å‡ºæ€§èƒ½ä¼˜åŒ–** - html2canvasé…ç½®ä¼˜åŒ–ï¼Œç¦ç”¨foreignObjectæ¸²æŸ“ï¼Œå¿½ç•¥ä¸å¿…è¦å…ƒç´ ï¼Œå‡å°‘å›¾ç‰‡åŠ è½½è¶…æ—¶ï¼Œé¢„è®¡æå‡20-30%å¯¼å‡ºé€Ÿåº¦

### æµè§ˆå™¨å…¼å®¹æ€§
- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹é»˜è®¤å‚æ•°
ç¼–è¾‘ `js/heatmap-renderer.js` ä¸­çš„é»˜è®¤é…ç½®ï¼š

```javascript
this.heatmapOptions = {
    radius: 1,        // é»˜è®¤åŠå¾„
    blur: 1,          // é»˜è®¤æ¨¡ç³Šåº¦
    minOpacity: 0.8,  // é»˜è®¤é€æ˜åº¦
    maxZoom: 18       // æœ€å¤§ç¼©æ”¾çº§åˆ«
};
```

### ä¿®æ”¹é¢œè‰²æ¸å˜
ç¼–è¾‘ `getStravaGradient()` å‡½æ•°ï¼š

```javascript
getStravaGradient() {
    return {
        0.0: '#00ff00',    // ç»¿è‰² - ä½é¢‘ç‡
        0.3: '#80ff00',    // é»„ç»¿è‰²
        0.5: '#ffff00',    // é»„è‰² - ä¸­é¢‘ç‡
        0.7: '#ff8000',    // æ©™è‰²
        1.0: '#ff0000'     // çº¢è‰² - é«˜é¢‘ç‡
    };
}
```

### æ·»åŠ æ–°çš„åœ°å›¾æ ·å¼
åœ¨ `setMapStyle()` å‡½æ•°ä¸­æ·»åŠ æ–°çš„ç“¦ç‰‡å±‚ï¼š

```javascript
case 'satellite':
    tileLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri'
    });
    break;
```

### é…ç½®å¤©åœ°å›¾APIå¯†é’¥ï¼ˆå¯é€‰ï¼‰

> âš ï¸ **é‡è¦æç¤º**ï¼šè¿™æ˜¯å¯é€‰åŠŸèƒ½ï¼é»˜è®¤ä½¿ç”¨å…è´¹è‹±æ–‡åœ°å›¾ï¼ˆCartoDBï¼‰ï¼Œæ— éœ€ä»»ä½•é…ç½®å³å¯ä½¿ç”¨æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ã€‚ä¸­æ–‡åœ°å›¾æ˜¯å¯é€‰çš„é«˜çº§åŠŸèƒ½ã€‚

å¦‚æœæ‚¨æƒ³ä½¿ç”¨ä¸­æ–‡åœ°å›¾ï¼Œéœ€è¦é…ç½®å¤©åœ°å›¾APIå¯†é’¥ï¼š

1. **è·å–APIå¯†é’¥**ï¼š
   - è®¿é—® [å¤©åœ°å›¾å®˜ç½‘](http://lbs.tianditu.gov.cn/)
   - æ³¨å†Œè´¦å·å¹¶ç™»å½•
   - è¿›å…¥æ§åˆ¶å°ï¼Œåˆ›å»ºåº”ç”¨
   - è·å–APIå¯†é’¥ï¼ˆKeyï¼‰

2. **é…ç½®å¯†é’¥**ï¼š
   - åœ¨åº”ç”¨ç•Œé¢ä¸­ï¼Œç‚¹å‡»å‚æ•°è®¾ç½®åŒºåŸŸçš„"âš™ï¸ APIè®¾ç½®ï¼ˆå¯é€‰ï¼Œç”¨äºä¸­æ–‡åœ°å›¾ï¼‰"é“¾æ¥
   - è¾“å…¥æ‚¨çš„å¤©åœ°å›¾APIå¯†é’¥
   - ç‚¹å‡»"ä¿å­˜å¯†é’¥"

3. **ä½¿ç”¨ä¸­æ–‡åœ°å›¾**ï¼š
   - é…ç½®å®Œæˆåï¼Œåœ¨åœ°å›¾è¯­è¨€é€‰é¡¹ä¸­é€‰æ‹©"ä¸­æ–‡åœ°å›¾"æˆ–"ä¸­æ–‡å«æ˜Ÿå›¾"
   - å¯†é’¥ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨

#### ğŸš€ å¿«é€Ÿè®¾ç½®ä¹¦ç­¾ï¼ˆæ¨èï¼‰

ä¸ºäº†æ–¹ä¾¿é‡å¤ä½¿ç”¨ï¼Œæ‚¨å¯ä»¥ç”Ÿæˆä¸€ä¸ªæµè§ˆå™¨ä¹¦ç­¾ï¼Œç‚¹å‡»ä¸€æ¬¡å³å¯è‡ªåŠ¨è®¾ç½®APIå¯†é’¥ï¼š

**æ–¹å¼ä¸€ï¼šè‡ªåŠ¨è®¾ç½®ä¹¦ç­¾ï¼ˆæœ€æ–¹ä¾¿ï¼‰**
1. åœ¨APIå¯†é’¥é…ç½®é¡µé¢è¾“å…¥æ‚¨çš„å¯†é’¥
2. ç‚¹å‡»"ğŸ”– ç”Ÿæˆè‡ªåŠ¨è®¾ç½®ä¹¦ç­¾"æŒ‰é’®
3. å°†ç”Ÿæˆçš„é“¾æ¥æ‹–æ‹½åˆ°æµè§ˆå™¨ä¹¦ç­¾æ 
4. æ¯æ¬¡è®¿é—®æ­¤åº”ç”¨æ—¶ï¼Œç‚¹å‡»ä¹¦ç­¾å³å¯è‡ªåŠ¨è®¾ç½®å¯†é’¥å¹¶åˆ·æ–°é¡µé¢
   - âœ… ä¼˜ç‚¹ï¼šä¸€é”®è®¾ç½®ï¼Œæ— éœ€é‡å¤è¾“å…¥
   - âš ï¸ æ³¨æ„ï¼šä¹¦ç­¾åŒ…å«æ‚¨çš„å¯†é’¥ï¼Œè¯·å¦¥å–„ä¿ç®¡

**æ–¹å¼äºŒï¼šè¾“å…¥å¼ä¹¦ç­¾ï¼ˆæ›´å®‰å…¨ï¼‰**
1. åœ¨APIå¯†é’¥é…ç½®é¡µé¢ç‚¹å‡»"ğŸ“ ç”Ÿæˆè¾“å…¥å¼ä¹¦ç­¾"æŒ‰é’®
2. å°†ç”Ÿæˆçš„é“¾æ¥æ‹–æ‹½åˆ°æµè§ˆå™¨ä¹¦ç­¾æ 
3. æ¯æ¬¡è®¿é—®æ—¶ç‚¹å‡»ä¹¦ç­¾ï¼Œä¼šå¼¹å‡ºè¾“å…¥æ¡†è®©æ‚¨è¾“å…¥å¯†é’¥
   - âœ… ä¼˜ç‚¹ï¼šä¸åŒ…å«å¯†é’¥ï¼Œæ›´å®‰å…¨
   - âš ï¸ ç¼ºç‚¹ï¼šæ¯æ¬¡éœ€è¦è¾“å…¥å¯†é’¥

> ğŸ’¡ **æ¨è**ï¼šå¦‚æœæ‚¨æ˜¯ä¸ªäººä½¿ç”¨ï¼Œæ¨èä½¿ç”¨"è‡ªåŠ¨è®¾ç½®ä¹¦ç­¾"ï¼Œæ–¹ä¾¿å¿«æ·ï¼

> ğŸ’¡ **æç¤º**ï¼š
> - ä¸ªäººå¼€å‘è€…æ¯æ—¥æœ‰10,000æ¬¡å…è´¹è°ƒç”¨é™åˆ¶
> - å¦‚æœæœªé…ç½®å¯†é’¥ï¼Œé€‰æ‹©ä¸­æ–‡åœ°å›¾æ—¶ä¼šè‡ªåŠ¨åˆ‡æ¢å›è‹±æ–‡åœ°å›¾
> - è‹±æ–‡åœ°å›¾åŠŸèƒ½å®Œå…¨ç›¸åŒï¼Œæ¨èä½¿ç”¨
> - ä¹¦ç­¾ä¸­çš„å¯†é’¥ç»è¿‡ç¼–ç ï¼Œç›¸å¯¹å®‰å…¨ï¼Œä½†ä»å»ºè®®ä¸è¦åˆ†äº«ä¹¦ç­¾

## ğŸš€ éƒ¨ç½²é€‰é¡¹

### 1. GitHub Pages (æ¨è)
```bash
# 1. åˆ›å»ºGitHubä»“åº“
# 2. ä¸Šä¼ é¡¹ç›®æ–‡ä»¶
# 3. åœ¨Settings -> Pagesä¸­å¯ç”¨GitHub Pages
# 4. é€‰æ‹©mainåˆ†æ”¯ä½œä¸ºæº
```

### 2. Netlify
```bash
# 1. æ³¨å†ŒNetlifyè´¦å·
# 2. è¿æ¥GitHubä»“åº“æˆ–ç›´æ¥æ‹–æ‹½æ–‡ä»¶å¤¹
# 3. è‡ªåŠ¨éƒ¨ç½²å®Œæˆ
```

### 3. Vercel
```bash
# 1. å®‰è£…Vercel CLI
npm i -g vercel

# 2. åœ¨é¡¹ç›®ç›®å½•è¿è¡Œ
vercel

# 3. æŒ‰æç¤ºå®Œæˆéƒ¨ç½²
```

### 4. è‡ªæ‰˜ç®¡
```bash
# ä½¿ç”¨Nginx
server {
    listen 80;
    server_name your-domain.com;
    root /path/to/bike_heat_web_version;
    index index.html;
    
    location / {
        try_files $uri $uri/ =404;
    }
}
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: åœ°å›¾æ˜¾ç¤ºç©ºç™½ï¼Ÿ**
A: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œç¡®ä¿èƒ½è®¿é—®åœ°å›¾ç“¦ç‰‡æœåŠ¡å™¨

**Q: è½¨è¿¹è®°å½•GPXè§£æå¤±è´¥ï¼Ÿ**
A: ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼ŒåŒ…å«æœ‰æ•ˆçš„è½¨è¿¹ç‚¹æ•°æ®

**Q: çƒ­åŠ›å›¾ä¸æ˜¾ç¤ºï¼Ÿ**
A: æ£€æŸ¥è½¨è¿¹ç‚¹æ•°é‡ï¼Œç¡®ä¿æœ‰è¶³å¤Ÿçš„æ•°æ®ç‚¹

**Q: å‚æ•°è°ƒèŠ‚æ— æ•ˆï¼Ÿ**
A: å…ˆç”Ÿæˆçƒ­åŠ›å›¾ï¼Œç„¶åè°ƒèŠ‚å‚æ•°ä¼šå®æ—¶æ›´æ–°

### è°ƒè¯•æ¨¡å¼
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼š

```javascript
// æŸ¥çœ‹åº”ç”¨çŠ¶æ€
console.log(window.app);

// æŸ¥çœ‹åŠ è½½çš„è½¨è¿¹æ•°æ®
console.log(window.app.loadedTracks);

// æŸ¥çœ‹åœ°å›¾å®ä¾‹
console.log(window.app.heatmapRenderer.map);
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
# 1. Forké¡¹ç›®
# 2. å…‹éš†åˆ°æœ¬åœ°
git clone <your-fork-url>

# 3. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/new-feature

# 4. æäº¤æ›´æ”¹
git commit -m "Add new feature"

# 5. æ¨é€åˆ°GitHub
git push origin feature/new-feature

# 6. åˆ›å»ºPull Request
```

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ES6+è¯­æ³•
- æ·»åŠ é€‚å½“çš„æ³¨é‡Š
- ä¿æŒä»£ç æ•´æ´
- æµ‹è¯•æ–°åŠŸèƒ½

### æäº¤å‰æµ‹è¯•

é¡¹ç›®åŒ…å«è‡ªåŠ¨æµ‹è¯•ç³»ç»Ÿï¼Œæäº¤å‰ä¼šè‡ªåŠ¨è¿è¡Œï¼š

```bash
# æ‰‹åŠ¨è¿è¡Œæ‰€æœ‰æµ‹è¯•
node scripts/test-all.js

# å•ç‹¬è¿è¡Œå„é¡¹æµ‹è¯•
node scripts/check-syntax.js      # è¯­æ³•æ£€æŸ¥
node scripts/check-files.js       # æ–‡ä»¶å®Œæ•´æ€§
node scripts/check-quality.js     # ä»£ç è´¨é‡
```

**Git Hooksï¼š** æ¯æ¬¡ `git commit` å’Œ `git push` ä¼šè‡ªåŠ¨è¿è¡Œæµ‹è¯•ï¼Œå¤±è´¥æ—¶é˜»æ­¢æ“ä½œã€‚

**è®¾ç½®Git Hooksï¼š**
```bash
# Windowsï¼ˆæ¨èï¼‰
scripts\setup-git-hooks.bat

# Linux/Macï¼ˆæ¨èï¼‰
chmod +x scripts/setup-git-hooks.sh
./scripts/setup-git-hooks.sh
```

**æ³¨æ„ï¼š** Git hooksä½¿ç”¨Node.jsè„šæœ¬ï¼ˆ.jsæ–‡ä»¶ï¼‰ï¼Œå¯ä»¥è·¨å¹³å°å·¥ä½œï¼ŒGitå¯ä»¥ç›´æ¥æ‰§è¡Œã€‚

**æµ‹è¯•å†…å®¹ï¼š**
- âœ… JavaScriptè¯­æ³•æ£€æŸ¥
- âœ… æ‹¬å·é…å¯¹éªŒè¯
- âœ… æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥
- âœ… HTMLç»“æ„éªŒè¯
- âœ… ä»£ç è´¨é‡æ£€æŸ¥
- âœ… å•å…ƒæµ‹è¯•ï¼ˆGeoUtilsã€GPXè§£æå™¨ï¼‰
- âœ… å›å½’æµ‹è¯•ï¼ˆå¯¼å‡ºåŠŸèƒ½ã€FITè§£æï¼‰

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒï¼š`doc/TESTING_GUIDE.md`

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](../LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- [Leaflet.js](https://leafletjs.com/) - ä¼˜ç§€çš„åœ°å›¾åº“
- [CartoDB](https://carto.com/) - æä¾›åœ°å›¾ç“¦ç‰‡æœåŠ¡
- [Strava](https://www.strava.com/) - çƒ­åŠ›å›¾è®¾è®¡çµæ„Ÿ

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- ğŸ“§ **Email**: dadongshangu@outlook.com
- ğŸŒ **ä¸ªäººç½‘é¡µ**: https://dadongshangu.github.io
- ğŸ› **GitHub Issues**: [é¡¹ç›®Issuesé¡µé¢]

---

**äº«å—ä½ çš„è¿åŠ¨è½¨è¿¹çƒ­åŠ›å›¾ä¹‹æ—…ï¼** ğŸš´â€â™‚ï¸âœ¨
